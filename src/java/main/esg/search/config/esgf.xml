<?xml version="1.0" encoding="UTF-8"?>
<!-- ESGF core schema -->
<esgf:schema xmlns:esgf="http://www.esgf.org/#" version="0.1">

  <!-- CORE MANDARTORY METADATA FIELDS -->

  <!-- "id" field is mandatory for ALL records -->
  <esgf:field name="id" minOccurs="1" maxOccurs="1" />

  <!-- "title" field is mandatory for all records -->
  <esgf:field name="title" minOccurs="1" maxOccurs="1" />

  <!-- "type" field is mandatory for ALL records, value must be chosen from the following controlled vocabulary -->
  <esgf:field name="type" minOccurs="1" maxOccurs="1">
    <esgf:value>Dataset</esgf:value>
    <esgf:value>File</esgf:value>
    <esgf:value>Aggregation</esgf:value>
  </esgf:field>

  <!-- "project" is mandatory for Datasets -->
  <esgf:field name="project" minOccurs="1" maxOccurs="1" recordType="Dataset" />

  <!-- "dataset_id" field is mandatory for Files, Aggregations -->
  <esgf:field name="dataset_id" minOccurs="1" maxOccurs="1" recordType="File, Aggregation" />

  <!-- data_node, index_node are used by ESGF web portal for file retrieval -->
  <esgf:field name="data_node" minOccurs="1" maxOccurs="1" />
  <esgf:field name="index_node" minOccurs="1" maxOccurs="1" />

  <!-- OPTIONAL FIELDS FOR VERSIONING AND REPLICATION -->

  <!-- "version" field is optional, defaults to 0, if provided it must be an integer -->
  <esgf:field name="version" minOccurs="0" maxOccurs="1" type="int" default="0" />

  <esgf:field name="master_id" minOccurs="0" maxOccurs="1" />
  <esgf:field name="instance_id" minOccurs="0" maxOccurs="1" />
  <esgf:field name="replica" minOccurs="0" maxOccurs="1" type="boolean" default="false" />
  <esgf:field name="latest" minOccurs="0" maxOccurs="1" type="boolean" default="true" />

  <esgf:field name="checksum" minOccurs="0" maxOccurs="1" recordType="File" />
  <esgf:field name="checksum_type" minOccurs="0" maxOccurs="1" recordType="File">
    <esgf:value>MD5</esgf:value>
    <esgf:value>SHA1</esgf:value>
  </esgf:field>

  <!-- OTHER GENERIC OPTIONAL FIELDS -->

  <!-- optional longer description -->
  <esgf:field name="description" minOccurs="0" maxOccurs="1" />

  <!-- "timestamp" is optional, if provided it must be in the format: yyyy-MM-dd'T'HH:mm:ss'Z' -->
  <esgf:field name="timestamp" minOccurs="0" maxOccurs="1" type="date" />

  <!-- records may have 0, 1 or more "access" fields -->
  <esgf:field name="access" minOccurs="0" maxOccurs="9999" />

  <!-- records may have 0, 1 or more "url" fields, encoded as 3-tuple of the form: 'url|mime type|service name' -->
  <esgf:field name="url" minOccurs="0" maxOccurs="9999" />
  
  <!-- data format -->
  <esgf:field name="format" minOccurs="0" maxOccurs="1" />

  <!-- OPTIONAL FIELDS NEEDED FOR FILE DOWNLOAD -->

  <!-- "size" field is optional, if provided it must be a long -->
  <esgf:field name="size" minOccurs="0" maxOccurs="1" type="long" minValue="0" />

  <!-- fields used by ESGF web portal data cart -->
  <esgf:field name="number_of_files" minOccurs="0" maxOccurs="1" type="int" minValue="0" recordType="Dataset" />
  <esgf:field name="number_of_aggregations" minOccurs="0" maxOccurs="1" type="int" minValue="0" recordType="Dataset" />

</esgf:schema>